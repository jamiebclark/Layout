function getUuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}!function(t){t.fn.hideDisableChildren=function(){return t(this).is(":visible")&&t(this).slideUp(),t(this).find(":input,select").filter(function(){return!1===t(this).prop("disabled")||!t(this).data("hide-disabled-set")}).each(function(){t(this).data("stored-disabled",t(this).prop("disabled")).data("hide-disabled-set",!0).prop("disabled",!0).trigger("layout-disabled")}),t(this)},t.fn.showEnableChildren=function(e){t(this).is(":hidden")&&t(this).slideDown();var a=t(this).find(":input").each(function(){var e=!1;t(this).data("stored-disabled")&&(e=t(this).data("stored-disabled")),t(this).data("hide-disabled-set",!1).prop("disabled",!1),e||t(this).trigger("layout-enabled")});return e&&a.first().select(),t(this)}}(jQuery),function(t){function e(e,a,s,i){if(void 0===i)var i=t("body");var l=t(a,i);return l.length||(l=t("<"+e+"></"+e+">",s).appendTo(i)),l}t.fn.selectCollapseHoverTrack=function(){return t(this).hover(function(){t(this).data("hovering",!0)},function(){t(this).data("hovering",!1)}),t(this)},t.fn.selectCollapse=function(){return this.each(function(){function a(t){m.find(".active").removeClass("active");var e=t.closest("span.select-collapse-option").addClass("active").closest("li");r(),d(e),s(t.data("val")),n(),f.data(j)}function s(t){f.val(t).trigger("change")}function i(){return f.data("expanded")?n():l()}function l(){m.is(":hidden")&&(C.focus().val(""),u()),p(),f.data("expanded",!0).attr("disabled","disabled");var e=f.offset(),a=f.outerHeight(),s=f.outerWidth();f.zIndex();return m.show().css({top:e.top+a,left:e.left,width:s}),t(".expanded > ul",m).show(),C.focus(),!0}function n(){return p(),f.data("expanded",!1),P||f.removeAttr("disabled"),m.hide(),!0}function o(t,e){var e=void 0===e||e;t.addClass("expanded").find(".select-collapse-bullet").first().html("-");var a=t.find("ul").first();a.is(":hidden")&&a.slideDown(),e&&d(t)}function d(e){e.parentsUntil(".select-collapse-window","li").each(function(){o(t(this),!1)})}function c(t,e){var e=void 0===e||e;t.removeClass("expanded").find(".select-collapse-bullet").first().html("+");var a=t.find("ul").first();a.is(":hidden")||a.slideUp(),e&&r(t)}function r(e){(e=void 0!==e?e:m).find("li.expanded").each(function(){c(t(this),!1)})}function p(){var t,e,a,s;f.is(":visible")?(t=f.offset(),e=f.position(),s=f.outerHeight(),a=f.outerWidth()):(e=t={top:0,left:0},a=0,s=0),U.length&&e.top>U.height()&&(s-=e.top-U.height())<0&&(s=0),T.css({position:"absolute",top:t.top,left:t.left,right:t.left+a,bottom:t.top+s,width:a,height:s})}function u(){var e=C.val(),s=e.toLowerCase(),i=f.data("optionVals");if(""===e)return k.show(),y.hide(),t(this);k.hide(),y.show().empty();for(var l=0;l<i.length;l++){var n=i[l].label;-1!=n.toLowerCase().indexOf(s)&&(n=n.replace(e,"<strong>"+e+"</strong>"),t('<a href="#"></a>').appendTo(y).data("target",i[l].target).wrap('<li><span class="select-collapse-option"></span></li>').html(n).click(function(e){e.preventDefault(),e.stopPropagation(),a(t(t(this).data("target")))}))}}function h(){var e=[],s=t("option",f),i=!1,l=0,n=0,d=k,r=[];v=!1,f.data("optionVals",[]),k.empty(),s.each(function(s){var p=t(this),u=t("<li></li>").addClass("no-child"),h=t('<a class="select-collapse-link" href="#"></a>').appendTo(u).wrap('<span class="select-collapse-option"></span>').data("val",p.val()).attr("id","select-collapse-"+f.attr("id")+"-"+s),x=p.html(),g=x.match(/^[^A-Za-z0-9]*/),b=0;if(g){g=g[0],x=x.substring(g.length),"_"==g.substr(0,1)&&(V="_");var w=(l=g.split(V).length-1)*V.length;w<g.length&&(x=g.substring(w)+x)}if(l>n)i&&(d=t("<ul></ul>").appendTo(i),i.removeClass("no-child").find("a").first().before(t('<a class="select-collapse-bullet" href="#">+</a>').click(function(e){e.preventDefault();var a=t(this).closest("li");a.hasClass("expanded")?c(a):o(a)})),c(i));else if(l<n){for(b=l;b<n;b++)d=d.closest("li").closest("ul"),e.pop();e.pop()}else e.pop();if(n=l,u.appendTo(d),h.html(x),p.is(":selected")&&(v=h),p.attr("disabled")?h.addClass("disabled").click(function(t){t.preventDefault()}):h.click(function(t){t.preventDefault(),a(h)}),i=u,t(this).val()){var m="";for(e.push(x),b=0;b<e.length;b++)m+="/"+e[b];r.push({label:m,value:t(this).val(),target:"#"+h.attr("id")})}}),v.length&&a(v),f.data("optionVals",r)}var f=t(this),v=!1,x=f.data("uuid")?f.data("uuid"):getUuid(),g=f.attr("id")?f.attr("id"):"select-collapse-"+x,b="select-collapse-window-"+x,w="select-collapse-mask-"+x;f.data("uuid",x).attr("id",g),f.data("optionVals")||f.data("optionVals",[]);var m=e("div","#"+b,{id:b,class:"select-collapse-window"}),C=e("input",".select-collapse-search",{class:"select-collapse-search",type:"text"},m),k=e("ul",".select-collapse-options",{class:"select-collapse-options"},m),y=e("ul",".select-collapse-search-results",{class:"select-collapse-search-results"},m),T=e("div","#"+w,{id:w,class:"select-collapse-mask"}),D=f.parents().add(t(window)),H=f.closest(".modal"),U=f.scrollParent(),V=" - ",j="collapse-init",P=f.is(":disabled");return f.data(j)||(p(),T.selectCollapseHoverTrack().hover(function(){t(this).css("cursor","pointer")}).click(function(){i()}),t(document).click(function(){!f.data("expanded")||f.data("hovering")||T.data("hovering")||m.data("hovering")||n()}),f.selectCollapseHoverTrack().click(function(t){f.data("expanded",!0).attr("disabled","disabled"),t.stopPropagation(),t.preventDefault(),i()}).hover(function(t){p()}),m.selectCollapseHoverTrack(),C.keyup(function(){u()}),D.each(function(){t(this).scroll(function(){f.length&&p(),f.data("expanded")&&l()})}),H.on("hide",function(){n()}).on("shown",function(){p()}),f.is(":disabled")&&(P=!0),f.on("layout-disabled",function(){P=!0}).on("layout-enabled",function(){P=!1}).on("refresh",function(){h()}),f.data(j,!0)),t(document).ajaxComplete(function(){h()}),h(),t(this)})},documentReady(function(){return t("select.select-collapse").selectCollapse()})}(jQuery);